<div>
    <h2 class="text-xl font-semibold">Sync Status</h2>
    <p class="text-gray-600">
        Current State:
        <span class="font-bold {% if is_running %}text-green-600{% else %}text-red-600{% endif %}">
            {{ status.state if status.state else ('RUNNING' if is_running else 'STOPPED') }}
        </span>
    </p>
    <p class="text-sm text-gray-500 mt-1">
        {{ status.details }}
    </p>
    {% if status.current_file %}
    <div class="mt-3" x-data="{ progress: {{ status.progress_percent if status.progress_percent is not none else 0 }} }">
        <p class="text-sm text-gray-700">
            Processing: <span class="font-medium">{{ status.current_file }}</span>
        </p>
        <div class="w-64 bg-gray-200 rounded-full h-2 mt-2" role="progressbar"
             aria-valuemin="0" aria-valuemax="100" :aria-valuenow="progress">
            <div class="h-2 rounded-full bg-blue-500" :style="'width: ' + progress + '%'" role="presentation"></div>
        </div>
        <p class="text-xs text-gray-500 mt-1" x-text="progress + '% complete'">
            {{ status.progress_percent }}% complete
        </p>
    </div>
    {% endif %}
    {% if status.last_sync_time %}
    <p class="text-xs text-gray-400 mt-2">
        Last sync at {{ status.last_sync_time }}
    </p>
    {% endif %}
    <p class="text-xs text-gray-400 mt-1">
        Updated {{ status.updated_at }}
    </p>
</div>
<div>
    {% if is_running %}
    <button hx-post="/filesync/stop" hx-target="#sync-status-section"
            class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded">
        Stop Sync
    </button>
    {% else %}
    <button hx-post="/filesync/start" hx-target="#sync-status-section"
            class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
        Start Sync
    </button>
    {% endif %}
</div>
